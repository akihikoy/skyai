// agent file for motion learning task of manoi01

//TODO include crawling/disca.agent

module  MLCHolder_TRealVector                                  , direct_action
module  MDiscretizer                                           , action_discretizer
module  MSimpleAccumulator_TRealVector                         , angle_accumulator

/// initialization process:
connect  ngnet.slot_initialize_finished                 , action_discretizer.slot_initialize
connect  action_discretizer.slot_initialize_finished    , avf_linear.slot_initialize

/// start of episode process:
connect  environment.slot_start_episode_finished        , angle_accumulator.slot_reset

/// start of time step process:
connect  timer.signal_start_of_step_ud1                 , direct_action.slot_start_time_step

/// end of time step process:
connect  timer.signal_end_of_step_ud1                   , direct_action.slot_finish_time_step

/// learning signals:
connect  behavior.signal_execute_action                 , action_discretizer.slot_in
connect  action_discretizer.signal_out                  , direct_action.slot_execute_action
connect  direct_action.slot_execute_action_finished     , holder_action.slot_1

connect  direct_action.signal_execute_command           , angle_accumulator.slot_add
connect  angle_accumulator.signal_sum                   , action_converter.slot_x
connect  action_converter.signal_y                      , environment.slot_execute_command_des_q
connect  direct_action.signal_end_of_action             , behavior.slot_finish_action


/// I/O:
connect  action_discretizer.out_set_size                , avf_linear.in_action_set_size


/// parameter setting:

action_discretizer.config ={
    Min = (-0.261799, -0.261799, -0.261799, -0.261799, -0.261799)
    Max = (0.261799, 0.261799, 0.261799, 0.261799, 0.261799)
    Division = (3, 3, 3, 3, 3)
  }
direct_action.config ={
    Interval = 0.5
  }
angle_accumulator.config ={
    Zero = (0.0, 0.0, 0.0, 0.0, 0.0)
    UsingMaxConstraint = true
    UsingMinConstraint = true
    Max = (-0.349066, 1.570796, 0.785398, 1.570796, 1.570796)
    Min = (-0.785398, -1.570796, -0.785398, -1.570796, -1.570796)
  }
